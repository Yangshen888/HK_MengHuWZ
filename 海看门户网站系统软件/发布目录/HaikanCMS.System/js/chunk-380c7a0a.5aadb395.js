(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-380c7a0a"],{"2f21":function(e,t,r){"use strict";var s=r("79e5");e.exports=function(e,t){return!!e&&s(function(){t?e.call(null,function(){},1):e.call(null)})}},"3b2b":function(e,t,r){var s=r("7726"),o=r("5dbc"),a=r("86cc").f,n=r("9093").f,l=r("aae3"),i=r("0bfb"),d=s.RegExp,c=d,u=d.prototype,f=/a/g,m=/a/g,h=new d(f)!==f;if(r("9e1e")&&(!h||r("79e5")(function(){return m[r("2b4c")("match")]=!1,d(f)!=f||d(m)==m||"/a/i"!=d(f,"i")}))){d=function(e,t){var r=this instanceof d,s=l(e),a=void 0===t;return!r&&s&&e.constructor===d&&a?e:o(h?new c(s&&!a?e.source:e,t):c((s=e instanceof d)?e.source:e,s&&a?i.call(e):t),r?this:u,d)};for(var p=function(e){e in d||a(d,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},g=n(c),v=0;g.length>v;)p(g[v++]);u.constructor=d,d.prototype=u,r("2aba")(s,"RegExp",d)}r("7a56")("RegExp")},"55dd":function(e,t,r){"use strict";var s=r("5ca1"),o=r("d8e8"),a=r("4bf8"),n=r("79e5"),l=[].sort,i=[1,2,3];s(s.P+s.F*(n(function(){i.sort(void 0)})||!n(function(){i.sort(null)})||!r("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(a(this)):l.call(a(this),o(e))}})},"627a":function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"a",function(){return o});r("28a5"),r("3b2b");var s=function(e,t,r){if(null!=t&&""!=t.trim()||r(new Error("请输入密码")),""!==t&&null!=t){var s=new RegExp("(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{6,30}");s.test(t)||r(new Error("密码中必须包含字母.数字.特殊字符!"))}r()},o=function(e,t,r){null!=t&&""!=t.trim()||r(new Error("请输入字符")),r()}},"838a":function(e,t,r){"use strict";r.d(t,"f",function(){return o}),r.d(t,"c",function(){return a}),r.d(t,"g",function(){return n}),r.d(t,"e",function(){return l}),r.d(t,"d",function(){return i}),r.d(t,"b",function(){return d}),r.d(t,"h",function(){return c}),r.d(t,"a",function(){return u});var s=r("66df"),o=function(e){return s["a"].request({url:"rbac/role/list",method:"post",data:e})},a=function(e){return s["a"].request({url:"rbac/role/create",method:"post",data:e})},n=function(e){return s["a"].request({url:"rbac/role/edit/"+e.guid,method:"get"})},l=function(e){return s["a"].request({url:"rbac/role/edit",method:"post",data:e})},i=function(e){return s["a"].request({url:"rbac/role/delete/"+e,method:"get"})},d=function(e){return s["a"].request({url:"rbac/role/batch",method:"get",params:e})},c=function(){return s["a"].request({url:"rbac/role/find_simple_list",method:"get"})},u=function(e){return s["a"].request({url:"rbac/role/assign_permission",method:"post",data:e})}},b1e8:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Card",[r("dz-table",{attrs:{totalCount:e.stores.user.query.totalCount,pageSize:e.stores.user.query.pageSize},on:{"on-page-change":e.handlePageChanged,"on-page-size-change":e.handlePageSizeChanged}},[r("div",{attrs:{slot:"searcher"},slot:"searcher"},[r("section",{staticClass:"dnc-toolbar-wrap"},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"16"}},[r("Form",{attrs:{inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[r("FormItem",[r("Input",{attrs:{type:"text",search:"",clearable:!0,placeholder:"输入关键字搜索..."},on:{"on-search":function(t){return e.handleSearchUser()}},model:{value:e.stores.user.query.kw,callback:function(t){e.$set(e.stores.user.query,"kw",t)},expression:"stores.user.query.kw"}},[r("Select",{staticStyle:{width:"60px"},attrs:{slot:"prepend",placeholder:"删除状态"},on:{"on-change":e.handleSearchUser},slot:"prepend",model:{value:e.stores.user.query.isDeleted,callback:function(t){e.$set(e.stores.user.query,"isDeleted",t)},expression:"stores.user.query.isDeleted"}},e._l(e.stores.user.sources.isDeletedSources,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])}),1)],1)],1)],1)],1),r("Col",{staticClass:"dnc-toolbar-btns",attrs:{span:"8"}},[r("ButtonGroup",{staticClass:"mr3"},[r("Button",{staticClass:"txt-danger",attrs:{icon:"md-trash",title:"删除"},on:{click:function(t){return e.handleBatchCommand("delete")}}}),r("Button",{staticClass:"txt-success",attrs:{icon:"md-redo",title:"恢复"},on:{click:function(t){return e.handleBatchCommand("recover")}}}),r("Button",{attrs:{icon:"md-refresh",title:"刷新"},on:{click:e.handleRefresh}})],1),r("Button",{directives:[{name:"can",rawName:"v-can",value:"create",expression:"'create'"}],attrs:{icon:"md-create",type:"primary",title:"新增用户"},on:{click:e.handleShowCreateWindow}},[e._v("新增用户")])],1)],1)],1)]),r("Table",{ref:"tables",attrs:{slot:"table",border:!1,size:"small","highlight-row":!0,data:e.stores.user.data,columns:e.stores.user.columns,"row-class-name":e.rowClsRender},on:{"on-select":e.handleSelect,"on-selection-change":e.handleSelectionChange,"on-refresh":e.handleRefresh,"on-page-change":e.handlePageChanged,"on-page-size-change":e.handlePageSizeChanged,"on-sort-change":e.handleSortChange},slot:"table",scopedSlots:e._u([{key:"userType",fn:function(t){var s=t.row;t.index;return[r("span",[e._v(e._s(e.renderUserType(s.userType)))])]}},{key:"status",fn:function(t){var s=t.row;t.index;return[r("Tag",{attrs:{color:e.renderStatus(s.status).color}},[e._v(e._s(e.renderStatus(s.status).text))])]}},{key:"action",fn:function(t){var s=t.row;t.index;return[r("Poptip",{attrs:{confirm:"",transfer:!0,title:"确定要删除吗?"},on:{"on-ok":function(t){return e.handleDelete(s)}}},[r("Tooltip",{attrs:{placement:"top",content:"删除",delay:1e3,transfer:!0}},[r("Button",{attrs:{type:"error",size:"small",shape:"circle",icon:"md-trash"}})],1)],1),r("Tooltip",{attrs:{placement:"top",content:"编辑",delay:1e3,transfer:!0}},[r("Button",{directives:[{name:"can",rawName:"v-can",value:"edit",expression:"'edit'"}],attrs:{type:"primary",size:"small",shape:"circle",icon:"md-create"},on:{click:function(t){return e.handleEdit(s)}}})],1)]}}])})],1)],1),r("Drawer",{attrs:{title:e.formTitle,width:"600","mask-closable":!1,mask:!0,styles:e.styles},model:{value:e.formModel.opened,callback:function(t){e.$set(e.formModel,"opened",t)},expression:"formModel.opened"}},[r("Form",{ref:"formUser",attrs:{model:e.formModel.fields,rules:e.formModel.rules,"label-position":"top"}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"登录名",prop:"loginName"}},[r("Input",{attrs:{placeholder:"请输入登录名"},model:{value:e.formModel.fields.loginName,callback:function(t){e.$set(e.formModel.fields,"loginName",t)},expression:"formModel.fields.loginName"}})],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"真实名",prop:"realName"}},[r("Input",{attrs:{placeholder:"请输入真实名"},model:{value:e.formModel.fields.realName,callback:function(t){e.$set(e.formModel.fields,"realName",t)},expression:"formModel.fields.realName"}})],1)],1)],1),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"密码",prop:"passWord"}},[r("Input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"password"},model:{value:e.formModel.fields.passWord,callback:function(t){e.$set(e.formModel.fields,"passWord",t)},expression:"formModel.fields.passWord"}}),r("Input",{attrs:{type:"password",placeholder:"请输入登录密码"},model:{value:e.formModel.fields.passWord,callback:function(t){e.$set(e.formModel.fields,"passWord",t)},expression:"formModel.fields.passWord"}})],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"角色",prop:"systemRoleUuid"}},[r("Select",{model:{value:e.formModel.fields.systemRoleUuid,callback:function(t){e.$set(e.formModel.fields,"systemRoleUuid",t)},expression:"formModel.fields.systemRoleUuid"}},e._l(e.rolelist,function(t){return r("Option",{key:t.systemRoleUuid,attrs:{value:t.systemRoleUuid}},[e._v(e._s(t.roleName))])}),1)],1)],1)],1),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"性别",prop:"sex"}},[r("Select",{model:{value:e.formModel.fields.sex,callback:function(t){e.$set(e.formModel.fields,"sex",t)},expression:"formModel.fields.sex"}},[r("Option",{attrs:{value:"男"}},[e._v("男")]),r("Option",{attrs:{value:"女"}},[e._v("女")])],1)],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"年龄",prop:"age"}},[r("Input-number",{attrs:{size:"small",min:0},model:{value:e.formModel.fields.age,callback:function(t){e.$set(e.formModel.fields,"age",t)},expression:"formModel.fields.age"}})],1)],1)],1),r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"昵称",prop:"nickname"}},[r("Input",{attrs:{placeholder:"请输入昵称"},model:{value:e.formModel.fields.nickname,callback:function(t){e.$set(e.formModel.fields,"nickname",t)},expression:"formModel.fields.nickname"}})],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"居住地",prop:"placeofresidence"}},[r("Input",{attrs:{placeholder:"请输入居住地"},model:{value:e.formModel.fields.placeofresidence,callback:function(t){e.$set(e.formModel.fields,"placeofresidence",t)},expression:"formModel.fields.placeofresidence"}})],1)],1)],1),r("Row",{attrs:{gutter:16}})],1),r("div",{staticClass:"demo-drawer-footer"},[r("Button",{attrs:{icon:"md-checkmark-circle",type:"primary"},on:{click:e.handleSubmitUser}},[e._v("保 存")]),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"md-close"},on:{click:function(t){e.formModel.opened=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],a=(r("55dd"),r("dc44")),n=r("66df"),l=function(e){return n["a"].request({url:"rbac/user/list",method:"post",data:e})},i=function(e){return n["a"].request({url:"rbac/user/create",method:"post",data:e})},d=function(e){return n["a"].request({url:"rbac/user/edit/"+e.guid,method:"get"})},c=function(e){return n["a"].request({url:"rbac/user/edit",method:"post",data:e})},u=function(e){return n["a"].request({url:"rbac/user/delete/"+e,method:"get"})},f=function(e){return n["a"].request({url:"rbac/user/batch",method:"get",params:e})},m=r("838a"),h=r("627a"),p={name:"rbac_user_page",components:{DzTable:a["a"]},data:function(){return{commands:{delete:{name:"delete",title:"删除"},recover:{name:"recover",title:"恢复"}},formModel:{opened:!1,title:"创建用户",mode:"create",selection:[],fields:{loginName:"",realName:"",passWord:"",addPeople:"",userType:0,isDeleted:0,systemRoleUuid:"",userIdCard:"",departmentUuid:""},rules:{loginName:[{validator:h["a"],type:"string",required:!0,message:"请输入登录名",min:3}],realName:[{validator:h["a"],type:"string",required:!0,message:"请输入真实名"}],passWord:[{validator:h["b"],type:"string",required:!0}],systemRoleUuid:[{required:!0,message:"请选择角色"}]}},formAssignRole:{userGuid:"",opened:!1,ownedRoles:[],inited:!1,roles:[]},stores:{user:{query:{totalCount:0,pageSize:20,currentPage:1,kw:"",isDeleted:0,status:-1,sort:[{direct:"DESC",field:"ID"}]},sources:{userTypes:[{value:0,text:"超级管理员"},{value:1,text:"管理员"},{value:2,text:"普通用户"}],isDeletedSources:[{value:-1,text:"全部"},{value:0,text:"正常"},{value:1,text:"已删"}],statusSources:[{value:-1,text:"全部"},{value:0,text:"禁用"},{value:1,text:"正常"}],statusFormSources:[{value:0,text:"禁用"},{value:1,text:"正常"}]},columns:[{type:"selection",width:50,key:"handle"},{title:"登录名",key:"loginName",sortable:!0},{title:"真实名",key:"realName"},{title:"用户类型",key:"userType",slot:"userType"},{title:"创建时间",ellipsis:!0,tooltip:!0,key:"addTime"},{title:"创建者",key:"addPeople"},{title:"操作",align:"center",width:150,className:"table-command-column",slot:"action"}],data:[]}},styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},rolelist:[],departmentlist:[]}},computed:{formTitle:function(){return"create"===this.formModel.mode?"创建用户":"edit"===this.formModel.mode?"编辑用户":""},selectedRows:function(){return this.formModel.selection},selectedRowsId:function(){return this.formModel.selection.map(function(e){return e.systemUserUuid})}},methods:{loadUserList:function(){var e=this;l(this.stores.user.query).then(function(t){e.stores.user.data=t.data.data,e.stores.user.query.totalCount=t.data.totalCount})},doloadRoleList:function(){var e=this;Object(m["h"])().then(function(t){e.rolelist=t.data.data})},handleOpenFormWindow:function(){this.formModel.opened=!0},handleCloseFormWindow:function(){this.formModel.opened=!1},handleSwitchFormModeToCreate:function(){this.formModel.mode="create"},handleSwitchFormModeToEdit:function(){this.formModel.mode="edit",this.handleOpenFormWindow()},handleEdit:function(e){this.handleSwitchFormModeToEdit(),this.handleResetFormUser(),this.doLoadUser(e.systemUserUuid)},handleSelect:function(e,t){},handleSelectionChange:function(e){this.formModel.selection=e},handleRefresh:function(){this.loadUserList()},handleShowCreateWindow:function(){this.handleSwitchFormModeToCreate(),this.handleOpenFormWindow(),this.handleResetFormUser()},handleSubmitUser:function(){var e=this.validateUserForm();e&&("create"===this.formModel.mode&&this.doCreateUser(),"edit"===this.formModel.mode&&this.doEditUser())},handleResetFormUser:function(){this.$refs["formUser"].resetFields()},doCreateUser:function(){var e=this;this.formModel.fields.addPeople=this.$store.state.user.userName,i(this.formModel.fields).then(function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleCloseFormWindow(),e.loadUserList()):e.$Message.warning(t.data.message)})},doEditUser:function(){var e=this;this.formModel.fields.addPeople=this.$store.state.user.userName,c(this.formModel.fields).then(function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleCloseFormWindow(),e.loadUserList()):e.$Message.warning(t.data.message)})},validateUserForm:function(){var e=this,t=!1;return this.$refs["formUser"].validate(function(r){r?t=!0:e.$Message.error("请完善表单信息")}),t},doLoadUser:function(e){var t=this;d({guid:e}).then(function(e){t.formModel.fields=e.data.data.query})},handleDelete:function(e){this.doDelete(e.systemUserUuid)},doDelete:function(e){var t=this;e?u(e).then(function(e){200===e.data.code?(t.$Message.success(e.data.message),t.loadUserList(),t.formModel.selection=[]):t.$Message.warning(e.data.message)}):this.$Message.warning("请选择至少一条数据")},handleBatchCommand:function(e){var t=this;!this.selectedRowsId||this.selectedRowsId.length<=0?this.$Message.warning("请选择至少一条数据"):this.$Modal.confirm({title:"操作提示",content:"<p>确定要执行当前 ["+this.commands[e].title+"] 操作吗?</p>",loading:!0,onOk:function(){t.doBatchCommand(e)}})},doBatchCommand:function(e){var t=this;f({command:e,ids:this.selectedRowsId.join(",")}).then(function(e){200===e.data.code?(t.$Message.success(e.data.message),t.loadUserList(),t.formModel.selection=[]):t.$Message.warning(e.data.message),t.$Modal.remove()})},handleSearchUser:function(){this.loadUserList()},rowClsRender:function(e,t){return e.isDeleted?"table-row-disabled":""},handleSortChange:function(e){this.stores.user.query.sort.direction=e.order,this.stores.user.query.sort.field=e.key,this.loadUserList()},handlePageChanged:function(e){this.stores.user.query.currentPage=e,this.loadUserList()},handlePageSizeChanged:function(e){this.stores.user.query.pageSize=e,this.loadUserList()},renderUserType:function(e){var t="未知";return null!=e&&""!=e&&(t=e),t},renderStatus:function(e){var t={color:"success",text:"正常"};switch(e){case 0:t.text="禁用",t.color="error";break}return t}},mounted:function(){this.loadUserList(),this.doloadRoleList()}},g=p,v=r("2877"),b=Object(v["a"])(g,s,o,!1,null,null,null);t["default"]=b.exports},bc57:function(e,t,r){"use strict";var s=r("ee02"),o=r.n(s);o.a},dc44:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dnc-table-wrap"},[e._t("searcher",[e.searchable&&"top"===e.searchPlace?r("div",{staticClass:"search-con search-con-top"},[r("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入关键字搜索"},on:{"on-change":e.handleClear},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),r("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.handleSearch}},[r("Icon",{attrs:{type:"search"}}),e._v("  搜索\n      ")],1)],1):e._e()]),e._t("table",[e._v("暂无数据")]),r("div",{staticStyle:{"margin-top":"15px"}},[e._t("pager",[r("Page",{attrs:{total:e.totalCount,"page-size":e.pageSize,size:"small","show-elevator":"","show-sizer":"","show-total":"","page-size-opts":e.pageSizeOpts},on:{"on-change":e.onPageChanged,"on-page-size-change":e.onPageSizeChanged}})])],2)],2)},o=[],a=(r("c5f6"),{name:"DzTable",data:function(){return{searchValue:""}},props:{searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"},totalCount:{type:Number,default:0},pageSize:{type:Number,default:20},showRefreshButton:{type:Boolean,default:!1},pageSizeOpts:{type:Array,default:function(){return[5,10,20,30,40,50]}}},methods:{handleClear:function(){},handleSearch:function(){this.$emit("on-search")},onPageChanged:function(e){this.$emit("on-page-change",e)},onPageSizeChanged:function(e){this.$emit("on-page-size-change",e)}}}),n=a,l=(r("bc57"),r("2877")),i=Object(l["a"])(n,s,o,!1,null,null,null);t["a"]=i.exports},ee02:function(e,t,r){}}]);